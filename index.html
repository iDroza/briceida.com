<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Underline Caret Lab</title>
<style>
  :root{ --bg:#000; --fg:#fff; --accent:#9900FF; --border:rgba(255,255,255,.14); }
  html,body{ height:100%; margin:0; background:var(--bg); color:var(--fg);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text","Helvetica Neue",Helvetica,Arial,sans-serif;
    font-weight:700; -webkit-font-smoothing:antialiased; overflow:hidden; }
  .wrap{ min-height:100%; display:grid; place-items:center; padding:2rem; text-align:center; }
  .hero{ display:inline-block; border:1px solid var(--border); border-radius:24px;
    padding:clamp(16px,3vw,32px) clamp(18px,4vw,52px); box-shadow:0 10px 30px rgba(0,0,0,.45); }
  .line{ margin:0; letter-spacing:.2px; line-height:1.05; font-size:clamp(28px,6vw,72px); white-space:pre-wrap; }
  .accent{ color:var(--accent); }

  /* Tray */
  .tray{ position:fixed; right:16px; top:16px; display:flex; gap:8px; align-items:center;
    background:rgba(255,255,255,.04); border:1px solid var(--border); border-radius:12px; padding:8px 10px; backdrop-filter:blur(6px); }
  .tray label{ font-size:.8rem; color:#aaa; font-weight:600; }
  .tray select,.tray button{ background:#111; color:#ddd; border:1px solid #2a2a2a; border-radius:8px; padding:6px 8px; font-weight:600; }
  .tray button{ cursor:pointer }
  .hint{ position:fixed; left:16px; bottom:16px; color:#888; font-size:.8rem; letter-spacing:.3px; }

  /* Base underline caret */
  .caret{ display:inline-block; background:currentColor; vertical-align:baseline; margin-left:.05em; }
  .underscore{ height:2px; width:.7em; transform:translateY(.45em); border-radius:2px; }
  .blink{ animation: blink 1s steps(1) infinite; }
  @keyframes blink{ 50%{opacity:0} }

  /* VARIANTS */
  /* 1) Hairline (ultra-thin) */
  .v-hair{ height:1px; opacity:.9; }

  /* 2) Thin (default size tweak) */
  .v-thin{ height:2px; }

  /* 3) Thick slab */
  .v-thick{ height:5px; border-radius:3px; }

  /* 4) Wide bar */
  .v-wide{ width:1.2em; }

  /* 5) Gradient bar */
  .v-gradient{ background:linear-gradient(90deg, var(--accent), #ffffff); }

  /* 6) Neon glow */
  .v-neon{ background:var(--accent); box-shadow:0 0 6px var(--accent), 0 0 18px var(--accent); }

  /* 7) Dashed underline */
  .v-dashed{ height:3px;
    background:repeating-linear-gradient(90deg, currentColor 0 6px, transparent 6px 11px); }

  /* 8) Dotted underline */
  .v-dotted{ height:3px;
    background:radial-gradient(currentColor 50%, transparent 52%); background-size:8px 3px; background-repeat:repeat-x; }

  /* 9) Double underline */
  .v-double{ position:relative; background:none; height:6px; width:.9em; }
  .v-double::before,.v-double::after{ content:""; position:absolute; left:0; right:0; height:2px; background:currentColor; border-radius:2px; }
  .v-double::before{ top:0; } .v-double::after{ bottom:0; }

  /* 10) Pulse width (breathing) */
  .v-pulse{ animation:widthPulse 1.4s ease-in-out infinite; }
  @keyframes widthPulse{ 0%,100%{ width:.6em } 50%{ width:1.15em } }

  /* 11) Color cycle (hue rotate) */
  .v-colorcycle{ background:var(--accent); filter:hue-rotate(0deg); animation:hue 3s linear infinite; }
  @keyframes hue{ to{ filter:hue-rotate(360deg) } }

  /* 12) Ripple (soft echo) */
  .v-ripple{ position:relative; }
  .v-ripple::after{ content:""; position:absolute; inset:0; border-radius:3px;
    box-shadow:0 0 0 0 rgba(153,0,255,.5); animation:ripple 1.2s ease-out infinite; }
  @keyframes ripple{ to{ box-shadow:0 0 0 8px rgba(153,0,255,0) } }

  /* 13) Elastic (overshoot stretch) */
  .v-elastic{ transform-origin:left bottom; animation:elastic 0.7s ease-out infinite alternate; }
  @keyframes elastic{ from{ transform:translateY(.45em) scaleX(.7) } to{ transform:translateY(.45em) scaleX(1.15) } }

  /* 14) Slideplate (subtle glide) */
  .v-slideplate{ width:1.1em; transition:width .2s ease; }
</style>
</head>
<body>
  <div class="tray">
    <label for="fx">Underline Caret</label>
    <select id="fx">
      <option value="v-thin">Thin (classic)</option>
      <option value="v-hair">Hairline</option>
      <option value="v-thick">Thick Slab</option>
      <option value="v-wide">Wide Bar</option>
      <option value="v-gradient">Gradient</option>
      <option value="v-neon">Neon Glow</option>
      <option value="v-dashed">Dashed</option>
      <option value="v-dotted">Dotted</option>
      <option value="v-double">Double</option>
      <option value="v-pulse">Pulse Width</option>
      <option value="v-colorcycle">Color Cycle</option>
      <option value="v-ripple">Ripple Echo</option>
      <option value="v-elastic">Elastic</option>
      <option value="v-slideplate">Slideplate</option>
    </select>
    <button id="prev">◀</button>
    <button id="next">▶</button>
    <button id="pause">⏸</button>
  </div>

  <div class="wrap">
    <div class="hero">
      <h1 class="line" id="line"></h1>
    </div>
  </div>

  <div class="hint">Space = pause/resume · Arrows = prev/next message</div>

<script>
(function(){
  const line = document.getElementById('line');
  const fxSel = document.getElementById('fx');
  const btnPrev = document.getElementById('prev');
  const btnNext = document.getElementById('next');
  const btnPause= document.getElementById('pause');

  // Messages to cycle
  const msgs = [
    {text:`The world is `, accent:`yours`, end:`.`},
    {text:`What are you so `, accent:`afraid`, end:` of?`},
    {text:`Volume Negates `, accent:`Luck`, end:`.`},
    {text:`No hard feelings `, accent:`brother`, end:`.`},
    {text:`Obedience `, accent:`begets`, end:` mediocrity.`},
    {text:`You don't win silver, you `, accent:`lose`, end:` gold.`},
    {text:`This isn't real, you're `, accent:`dreaming`, end:`.`},
    {text:`I am `, accent:`invincible`, end:`.`}
  ];

  // Timings
  const HOLD = 1100, TYPE = 55, ERASE = 36;
  const wait = ms => new Promise(r=>setTimeout(r,ms));

  const plain  = m => (m.text||"") + (m.accent||"") + (m.end||"");
  const finalHTML = m => `${m.text}<span class="accent">${m.accent||""}</span>${m.end||""}`;

  // Build caret HTML based on selected variant
  function caretHTML(){
    const v = fxSel.value || 'v-thin';
    return `<span class="caret underscore ${v} blink"></span>`;
  }

  // Type + erase with underline caret
  async function typeOne(m){
    const t = plain(m);
    line.innerHTML = '';
    // type
    for(let i=0;i<t.length;i++){
      line.textContent = t.slice(0,i+1);
      line.insertAdjacentHTML('beforeend', caretHTML());
      await wait(TYPE);
    }
    // swap in accent markup and caret
    line.innerHTML = finalHTML(m) + caretHTML();
    await wait(HOLD);
    // erase
    let s = line.innerText; // strip caret/markup
    while(s.length){
      s = s.slice(0,-1);
      line.textContent = s;
      line.insertAdjacentHTML('beforeend', caretHTML());
      await wait(ERASE);
    }
    line.innerHTML = '';
  }

  // Runner
  let idx=0, paused=false, loop=true;
  async function cycle(){
    while(loop){
      if(paused){ await wait(80); continue; }
      await typeOne(msgs[idx % msgs.length]);
      idx = (idx+1) % msgs.length;
    }
  }

  // Controls
  btnPrev.addEventListener('click', async ()=>{
    if(paused) return; paused=true; btnPause.textContent='▶';
    idx = (idx-1+msgs.length)%msgs.length;
    paused=false; btnPause.textContent='⏸';
  });
  btnNext.addEventListener('click', async ()=>{
    if(paused) return; paused=true; btnPause.textContent='▶';
    idx = (idx+1)%msgs.length;
    paused=false; btnPause.textContent='⏸';
  });
  btnPause.addEventListener('click', ()=>{ paused=!paused; btnPause.textContent = paused?'▶':'⏸'; });
  window.addEventListener('keydown',(e)=>{
    if(e.code==='Space'){ e.preventDefault(); btnPause.click(); }
    if(e.code==='ArrowRight') btnNext.click();
    if(e.code==='ArrowLeft') btnPrev.click();
  });

  (async()=>{ await wait(200); cycle(); })();
})();
</script>
</body>
</html>
